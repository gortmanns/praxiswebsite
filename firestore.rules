/**
 * @fileoverview Firestore Security Rules for the application.
 *
 * Core Philosophy:
 * This ruleset prioritizes simplicity and security. It assumes all collections
 * are read-only for unauthenticated users, and write access is denied unless
 * explicitly granted. Data structure validation is relaxed to allow for rapid prototyping.
 *
 * Data Structure:
 * The Firestore database contains several top-level collections: `doctors`, `staff`,
 * `medicalPartners`, `otherPartners`, `holidays`, and a special document at `settings/banners`.
 *
 * Key Security Decisions:
 * - Unauthenticated users can read all collections.
 * - Write access is denied to all collections unless explicitly granted (currently none).
 * - Data validation is minimal during this prototyping phase. Only relational integrity and
 *   authorization-related fields are validated.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to doctor profiles. Write access is denied.
     * @path /doctors/{doctorId}
     * @allow get, list: Unauthenticated users can read doctor profiles.
     * @deny create, update, delete: No one can create, update, or delete doctor profiles.
     * @principle Allows public read access while restricting write access.
     */
    match /doctors/{doctorId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to staff member profiles. Write access is denied.
     * @path /staff/{staffMemberId}
     * @allow get, list: Unauthenticated users can read staff member profiles.
     * @deny create, update, delete: No one can create, update, or delete staff member profiles.
     * @principle Allows public read access while restricting write access.
     */
    match /staff/{staffMemberId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to medical partner information. Write access is denied.
     * @path /medicalPartners/{medicalPartnerId}
     * @allow get, list: Unauthenticated users can read medical partner information.
     * @deny create, update, delete: No one can create, update, or delete medical partner information.
     * @principle Allows public read access while restricting write access.
     */
    match /medicalPartners/{medicalPartnerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to other partner information. Write access is denied.
     * @path /otherPartners/{otherPartnerId}
     * @allow get, list: Unauthenticated users can read other partner information.
     * @deny create, update, delete: No one can create, update, or delete other partner information.
     * @principle Allows public read access while restricting write access.
     */
    match /otherPartners/{otherPartnerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to holiday information. Write access is denied.
     * @path /holidays/{holidayId}
     * @allow get, list: Unauthenticated users can read holiday information.
     * @deny create, update, delete: No one can create, update, or delete holiday information.
     * @principle Allows public read access while restricting write access.
     */
    match /holidays/{holidayId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to banner settings. Write access is denied.
     * @path /settings/banners
     * @allow get: Unauthenticated users can read banner settings.
     * @deny list: Listing is not allowed on single documents.
     * @deny create, update, delete: No one can create, update, or delete banner settings.
     * @principle Allows public read access while restricting write access.
     */
    match /settings/banners {
      allow get: if true;
      allow list: if false;
      allow create, update, delete: if false;
    }
  }
}