/**
 * @fileoverview Firestore Security Rules for Praxis Online application.
 *
 * Core Philosophy:
 * This ruleset provides public read access to all collections while restricting write access.
 * It's designed for rapid prototyping and assumes that all data validation will be handled
 * in the application code. The rules primarily focus on preventing unauthorized data modification.
 *
 * Data Structure:
 * The Firestore database consists of three top-level collections:
 * - /doctor_profiles/{doctorProfileId}: Stores doctor profile information.
 * - /contact_form_submissions/{contactFormSubmissionId}: Stores contact form submissions.
 * - /symptom_checks/{symptomCheckId}: Stores symptom check records.
 *
 * Key Security Decisions:
 * - Public read access is granted to all collections to simplify initial development.
 * - Write access (create, update, delete) is denied by default and must be explicitly
 *   enabled through additional rules or backend logic. This prevents unauthorized
 *   modification of data during the prototyping phase.
 * - No data shape validation is performed in the rules. The application is responsible
 *   for ensuring data integrity.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Grants public read access to doctor profiles and restricts write access.
     * @path /doctor_profiles/{doctorProfileId}
     * @allow get, list: All users can read doctor profiles.
     * @allow create: Unauthorized users cannot create doctor profiles.
     * @allow update: Unauthorized users cannot update doctor profiles.
     * @allow delete: Unauthorized users cannot delete doctor profiles.
     * @deny create: if true;
     * @deny update: if true;
     * @deny delete: if true;
     * @principle Allows public read access for doctor profiles.
     */
    match /doctor_profiles/{doctorProfileId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Grants public read access to contact form submissions and restricts write access.
     * @path /contact_form_submissions/{contactFormSubmissionId}
     * @allow get, list: All users can read contact form submissions.
     * @allow create: Unauthorized users cannot create contact form submissions.
     * @allow update: Unauthorized users cannot update contact form submissions.
     * @allow delete: Unauthorized users cannot delete contact form submissions.
     * @deny create: if true;
     * @deny update: if true;
     * @deny delete: if true;
     * @principle Allows public read access for contact form submissions.
     */
    match /contact_form_submissions/{contactFormSubmissionId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Grants public read access to symptom checks and restricts write access.
     * @path /symptom_checks/{symptomCheckId}
     * @allow get, list: All users can read symptom checks.
     * @allow create: Unauthorized users cannot create symptom checks.
     * @allow update: Unauthorized users cannot update symptom checks.
     * @allow delete: Unauthorized users cannot delete symptom checks.
     * @deny create: if true;
     * @deny update: if true;
     * @deny delete: if true;
     * @principle Allows public read access for symptom checks.
     */
    match /symptom_checks/{symptomCheckId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}