/**
 * @fileOverview Firestore Security Rules for the practice data.
 *
 * Core Philosophy:
 * This ruleset allows public read access to all collections to facilitate easy prototyping.
 * Write access to all collections is denied. This is a prototype and should be changed in production.
 *
 * Data Structure:
 * The Firestore database contains several top-level collections: 'doctors', 'staff', 'medicalPartners',
 * 'otherPartners', 'holidays', and a document 'settings/banners'.
 *
 * Key Security Decisions:
 * - Public read access is enabled for all collections.
 * - No write access is allowed.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows anyone to read doctor profiles, but nobody to modify them.
     * @path /databases/{database}/documents/doctors/{doctorId}
     * @allow (get, list): Any user can read doctor profiles.
     * @deny (create, update, delete): No user can create, update, or delete doctor profiles.
     * @principle Allows public read access but restricts all write access.
     */
    match /doctors/{doctorId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read staff member profiles, but nobody to modify them.
     * @path /databases/{database}/documents/staff/{staffMemberId}
     * @allow (get, list): Any user can read staff member profiles.
     * @deny (create, update, delete): No user can create, update, or delete staff member profiles.
     * @principle Allows public read access but restricts all write access.
     */
    match /staff/{staffMemberId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read medical partner information, but nobody to modify them.
     * @path /databases/{database}/documents/medicalPartners/{medicalPartnerId}
     * @allow (get, list): Any user can read medical partner information.
     * @deny (create, update, delete): No user can create, update, or delete medical partner information.
     * @principle Allows public read access but restricts all write access.
     */
    match /medicalPartners/{medicalPartnerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read other partner information, but nobody to modify them.
     * @path /databases/{database}/documents/otherPartners/{otherPartnerId}
     * @allow (get, list): Any user can read other partner information.
     * @deny (create, update, delete): No user can create, update, or delete other partner information.
     * @principle Allows public read access but restricts all write access.
     */
    match /otherPartners/{otherPartnerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read holiday information, but nobody to modify them.
     * @path /databases/{database}/documents/holidays/{holidayId}
     * @allow (get, list): Any user can read holiday information.
     * @deny (create, update, delete): No user can create, update, or delete holiday information.
     * @principle Allows public read access but restricts all write access.
     */
    match /holidays/{holidayId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows anyone to read banner settings, but nobody to modify them.
     * @path /databases/{database}/documents/settings/banners
     * @allow (get): Any user can read banner settings.
     * @deny (create, update, delete, list): No user can create, update, delete, or list banner settings.
     * @principle Allows public read access but restricts all write access.  Also, there should be only one settings doc.
     */
    match /settings/banners {
      allow get: if true;
      allow create, update, delete, list: if false;
    }
  }
}