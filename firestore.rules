/**
 * @file Firestore Security Rules
 * @description This ruleset allows public read access to collections storing profile and partner information, while restricting write access to authenticated users.
 *
 * Data Structure:
 * - The database consists of several top-level collections: `doctors`, `staff`, `serviceProviders`, `medicalPartners`, `otherPartners`, `holidays`, `infoBanners`, and `settings`.
 * - The `settings/banners` document stores configuration settings for holiday banners.
 *
 * Key Security Decisions:
 * - Read access is generally public for all collections to allow all users to view profile and partner information.
 * - Write access (create, update, delete) is denied for all collections to prevent unauthorized modifications.
 * - No user-specific data is stored, and therefore no ownership checks are needed.
 *
 * Access Control Pattern: Public Read with Owner-Only Writes (emulated by denying all writes).
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to doctor profiles. Write access is denied.
     * @path /databases/{database}/documents/doctors/{doctorId}
     * @allow (get, list): Any user can read doctor profiles.
     * @deny (create, update, delete): No user can modify doctor profiles.
     * @principle Allows public read access and prevents unauthorized data modifications.
     */
    match /doctors/{doctorId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to staff member profiles. Write access is denied.
     * @path /databases/{database}/documents/staff/{staffId}
     * @allow (get, list): Any user can read staff profiles.
     * @deny (create, update, delete): No user can modify staff profiles.
     * @principle Allows public read access and prevents unauthorized data modifications.
     */
    match /staff/{staffId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to service provider profiles. Write access is denied.
     * @path /databases/{database}/documents/serviceProviders/{serviceProviderId}
     * @allow (get, list): Any user can read service provider profiles.
     * @deny (create, update, delete): No user can modify service provider profiles.
     * @principle Allows public read access and prevents unauthorized data modifications.
     */
    match /serviceProviders/{serviceProviderId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to medical partner information. Write access is denied.
     * @path /databases/{database}/documents/medicalPartners/{medicalPartnerId}
     * @allow (get, list): Any user can read medical partner information.
     * @deny (create, update, delete): No user can modify medical partner information.
     * @principle Allows public read access and prevents unauthorized data modifications.
     */
    match /medicalPartners/{medicalPartnerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to other partner information. Write access is denied.
     * @path /databases/{database}/documents/otherPartners/{otherPartnerId}
     * @allow (get, list): Any user can read other partner information.
     * @deny (create, update, delete): No user can modify other partner information.
     * @principle Allows public read access and prevents unauthorized data modifications.
     */
    match /otherPartners/{otherPartnerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
    
    /**
     * @description Allows public read access to holiday information. Write access is denied.
     * @path /databases/{database}/documents/holidays/{holidayId}
     * @allow (get, list): Any user can read holiday information.
     * @deny (create, update, delete): No user can modify holiday information.
     * @principle Allows public read access and prevents unauthorized data modifications.
     */
    match /holidays/{holidayId} {
        allow get, list: if true;
        allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to info banners. Write access is denied.
     * @path /databases/{database}/documents/infoBanners/{infoBannerId}
     * @allow (get, list): Any user can read info banners.
     * @deny (create, update, delete): No user can modify info banners.
     * @principle Allows public read access and prevents unauthorized data modifications.
     */
    match /infoBanners/{infoBannerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to banner settings. Write access is denied.
     * @path /databases/{database}/documents/settings/banners
     * @allow (get): Any user can read banner settings.
     * @deny (create, update, delete, list): No user can modify or list banner settings.
     * @principle Allows public read access and prevents unauthorized data modifications.
     */
    match /settings/banners {
      allow get: if true;
      allow create, update, delete, list: if false;
    }
  }
}