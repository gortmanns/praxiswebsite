/**
 * @file Firestore Security Rules
 * @description This ruleset provides basic read access to several collections
 * and restricts write access.
 *
 * Core Philosophy:
 * The ruleset is in "Prototyping Mode". It allows public read access to the doctors, staff,
 * medicalPartners and otherPartners collections. Write access is completely disabled
 * to ensure no data can be modified.
 *
 * Data Structure:
 * The database consists of several top-level collections:
 * - /doctors: Stores doctor profiles.
 * - /staff: Stores staff member profiles.
 * - /medicalPartners: Stores medical partner information.
 * - /otherPartners: Stores other partner information.
 * - /settings/banners: Stores settings for site banners
 *
 * Key Security Decisions:
 * - Public read access is granted to all collections to allow for easy data fetching during prototyping.
 * - All write operations are explicitly denied to prevent accidental data modification.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to the doctors collection.
     * @path /databases/{database}/documents/doctors/{doctorId}
     * @allow (get, list) Any user can read doctor profiles.
     * @deny (create, update, delete) No user can create, update, or delete doctor profiles.
     * @principle Grants public read access and denies all write access.
     */
    match /doctors/{doctorId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to the staff collection.
     * @path /databases/{database}/documents/staff/{staffId}
     * @allow (get, list) Any user can read staff profiles.
     * @deny (create, update, delete) No user can create, update, or delete staff profiles.
     * @principle Grants public read access and denies all write access.
     */
    match /staff/{staffId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to the medicalPartners collection.
     * @path /databases/{database}/documents/medicalPartners/{partnerId}
     * @allow (get, list) Any user can read medical partner information.
     * @deny (create, update, delete) No user can create, update, or delete medical partner information.
     * @principle Grants public read access and denies all write access.
     */
    match /medicalPartners/{partnerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }

    /**
     * @description Allows public read access to the otherPartners collection.
     * @path /databases/{database}/documents/otherPartners/{partnerId}
     * @allow (get, list) Any user can read other partner information.
     * @deny (create, update, delete) No user can create, update, or delete other partner information.
     * @principle Grants public read access and denies all write access.
     */
    match /otherPartners/{partnerId} {
      allow get, list: if true;
      allow create, update, delete: if false;
    }
    
     /**
      * @description Allows public read access to the banners document in the settings collection.
      * @path /databases/{database}/documents/settings/banners
      * @allow (get, list) Any user can read the settings/banners document.
      * @deny (create, update, delete) No user can create, update, or delete the settings/banners document.
      * @principle Grants public read access and denies all write access.
      */
    match /settings/banners {
      allow get: if true;
      allow list: if false; // Listing documents under a specific document is not generally supported/needed
      allow create, update, delete: if false;
    }
  }
}