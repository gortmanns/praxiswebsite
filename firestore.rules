/**
 * @fileoverview Firestore Security Rules for Praxis Online.
 *
 * Core Philosophy:
 * This ruleset provides public read access to `doctor_profiles` while restricting write access to `contact_form_submissions` and `symptom_checks`.
 *
 * Data Structure:
 * The Firestore database consists of three top-level collections:
 * - /doctor_profiles/{doctorProfileId}: Stores publicly readable doctor profiles.
 * - /contact_form_submissions/{contactFormSubmissionId}: Stores contact form submissions, write-protected.
 * - /symptom_checks/{symptomCheckId}: Stores symptom check records, write-protected.
 *
 * Key Security Decisions:
 * - Doctor profiles are publicly readable to facilitate easy access to doctor information.
 * - Contact form submissions are write-protected to prevent unauthorized submissions.
 * - Symptom checks are write-protected to prevent unauthorized record creation.
 * - List operations on `doctor_profiles` are enabled, while `contact_form_submissions` and `symptom_checks` are disabled.
 */
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {

    /**
     * @description Allows public read access to doctor profiles.
     * @path /doctor_profiles/{doctorProfileId}
     * @allow (get) Anyone can read a doctor profile.
     * @allow (list) Anyone can list doctor profiles.
     * @deny (create) No one can create a doctor profile.
     * @deny (update) No one can update a doctor profile.
     * @deny (delete) No one can delete a doctor profile.
     * @principle Provides public read access to doctor information.
     */
    match /doctor_profiles/{doctorProfileId} {
      allow get, list: if true;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Restricts write access to contact form submissions.
     * @path /contact_form_submissions/{contactFormSubmissionId}
     * @allow (get) Anyone can read a contact form submission.
     * @deny (list) No one can list contact form submissions.
     * @deny (create) No one can create a contact form submission.
     * @deny (update) No one can update a contact form submission.
     * @deny (delete) No one can delete a contact form submission.
     * @principle Protects contact form submissions from unauthorized writes.
     */
    match /contact_form_submissions/{contactFormSubmissionId} {
      allow get: if true;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }

    /**
     * @description Restricts write access to symptom check records.
     * @path /symptom_checks/{symptomCheckId}
     * @allow (get) Anyone can read a symptom check record.
     * @deny (list) No one can list symptom check records.
     * @deny (create) No one can create a symptom check record.
     * @deny (update) No one can update a symptom check record.
     * @deny (delete) No one can delete a symptom check record.
     * @principle Protects symptom check records from unauthorized writes.
     */
    match /symptom_checks/{symptomCheckId} {
      allow get: if true;
      allow list: if false;
      allow create: if false;
      allow update: if false;
      allow delete: if false;
    }
  }
}